{% extends "pages/home.html" %}
{% load static %}
{% block extrahead %}
{{ form.media}}
{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'public/table.css' %}">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.13.1/datatables.min.css" />
<script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.13.1/datatables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js" defer></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="{% static 'public/job_profile.css' %}">
<div style="margin-top: 15px;"> 
<div class="box-body" id="white-box" style="padding-left: 30px;box-sizing: border-box;">
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Manufacturer Part No</label>
            <input type="text" id="Manufacturer" name="fname" placeholder="Manufacturing Part No"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Mounting Type</label>
            <br>
            <select name="fname" placeholder="Mounting Type" id="Mounting_drop" style="    width: 155px;">
                <option value="0">Surface</option>
                <option value="1">Through</option>
                <option value="2">Other</option>
              
              </select>
            
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">value</label>
            <input type="text" id="productvalue" name="fname" placeholder="value"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">HT</label>
            <input type="text" id="HT" name="fname" placeholder="HT"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Dia</label>
            <input type="text" id="Dia" name="fname" placeholder="Dia"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Spring Dia</label>
            <input type="text" id="Spring" name="fname" placeholder="Spring Dia"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Material</label>
            <input type="text" id="Material" name="fname" placeholder="Material"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <div class="form-group">
            <label for="fname">Pitch</label>
            <input type="text" id="Pitch" name="fname" placeholder="Pitch"><br><br>
        </div>
    </div>
    <div class="col-sm-3 col-md-3">
        <button onclick="fund_search_list()">Search</button>
    </div>
</div>
<table id="example" class="table-hover" style="height:10px;width:100%">
    <thead>
        <tr>
            <th class="Manufacturer">Manufacturer Part No</th>
			<th class="mounting">Mounting Type</th>
			<th class="value">Value</th>
			<th class="ht">HT</th>
			<th class="dia">Dia</th>
			<th class="spring_dia">Spring Dia</th>
			<th class="material">Material</th>
			<th class="pitch">Pitch</th>
			<th class="Datasheet">Datasheet</th>
			<th class="Reference">Reference</th>
			<th class="Reference">Edit</th>
        </tr>
    </thead>
    <tbody>
        {% for list in page_obj %}
        
            
            <th class="Manufacturer">{{list.mrfppartno}}</th>
            <th class="mounting">{{list.mounting}}</th>
            <th class="value">{{list.value}}</th>
            <th class="ht">{{list.ht}}</th>
            <th class="dia">{{list.dia}}</th>
            <th class="spring_dia">{{list.spring_dia}}</th>
            <th class="material">{{list.material}}</th>
            <th class="pitch">{{list.pitch}}</th>
            
            <!-- <th class="tbhead vsm c">{{list.Datasheet}}</th> -->
            {% if "media" in list.datasheet %}
			<th class="Datasheet"><button type="button" onclick="window.open('{{list.datasheet}}','_blank')"
					target="_blank">Datasheet</button></th>
			{% elif list.datasheet == None %}
			<th class="Datasheet"><button type="button"
				target="_blank">Datasheet</button></th>
			{% elif list.datasheet == "" %}
			<th class="Datasheet"><button type="button"
				target="_blank">Datasheet</button></th>
			{% else %}
			<th class="Datasheet"><button type="button" onclick="window.open('{{list.datasheet}}','_blank')"
				target="_blank">Datasheet</button></th>
			{% endif %}
			<!-- <th class="edit">{{list.ref}}</th> -->
			{% if list.ref == None %}
			<th class="Reference"><button type="button" 
				target="_blank">Reference</button></th>
			{% elif list.ref == "" %}
			<th class="Reference"><button type="button" 
				target="_blank">Reference</button></th>
			{% else %}
			<th class="Reference"><button type="button" onclick="window.open('{{list.ref}}','_blank')"
				target="_blank">Reference</button></th>
			{% endif %}
            <th class="edit"><button type="button" onclick=edit({{list.id}})
                target="_blank">Edit</button></th>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div class="pagination" style="float:right; ">
    <span class="step-links">
        {% if page_obj.has_previous %}
        <a id="coloor" href="?page=1">
            << </a>
                <a id="coloor" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                {% endif %}

                <span class="current">
                    {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                </span>

                {% if page_obj.has_next %}
                <a id="coloor" href="?page={{ page_obj.next_page_number }}">Next</a>
                <a id="coloor" href="?page={{ page_obj.paginator.num_pages }}">>></a>
                {% endif %}
    </span>
</div>
<style>
    a#coloor {
        background-image: linear-gradient(-180deg, #37AEE2 0%, #1E96C8 100%);
        color: white;
        margin: 0 4px;
        font-size: 14px;
        /* width: 80px; */
        /* height: 60px; */
        padding: 3px 16px;
        border-radius: 8px;
        border: 2px solid black;
    }

    button {
        appearance: none;
        background-image: linear-gradient(-180deg, #37AEE2 0%, #1E96C8 100%);
        border: 2px solid #1A1A1A;
        border-radius: 15px;
        box-sizing: border-box;
        color: #FFFFFF;
        cursor: pointer;
        display: inline-block;
        font-family: Roobert, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 12px;
        font-weight: 600;
        line-height: normal;
        margin: 0;
        min-height: 40px;
        min-width: 80px;
        outline: none;
        /* padding: 16px 24px; */
        text-align: center;
        text-decoration: none;
        transition: all 300ms cubic-bezier(.23, 1, 0.32, 1);
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        /* width: 100%; */
        will-change: transform;
    }
</style>
<style>
    div#white-box {
        width: auto;
        background-color: #fff;
        color: #000;
        padding: 8px 12px;
        word-wrap: break-word;
    }
    input,input#fname {
        font-family: inherit;
        display: block !important;
        height: 25px;
        padding: 6px 6px !important;
        font-size: 11px !important;
        line-height: 1.42857143 !important;
        color: #223D4F !important;
        background-color: transparent !important;
        background-image: none !important;
        border: 1px solid #D7DCDE !important;
        border-radius: 0px !important;
        box-shadow: none !important;
        font-size: inherit;
        line-height: inherit;
    }
    label {
        font-size: 11px;
        color: black;
    }
    .form-group {
        margin-top: 6px !important;
        margin-bottom: -30px !important;
    }
    button {
        appearance: none;
        background-image: linear-gradient(-180deg, #37AEE2 0%, #1E96C8 100%);
        border: 2px solid #1A1A1A;
        border-radius: 15px;
        box-sizing: border-box;
        color: #FFFFFF;
        cursor: pointer;
        display: inline-block;
        font-family: Roobert, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 12px;
        font-weight: 600;
        line-height: normal;
        margin: 0;
        min-height: 35px;
        min-width: 70px;
        outline: none;
        /* padding: 16px 24px; */
        text-align: center;
        text-decoration: none;
        transition: all 300ms cubic-bezier(.23, 1, 0.32, 1);
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        /* width: 100%; */
        will-change: transform;
    }
</style>
</div>
<div id="maintb"></div>
<script>


    var drop_down_val=""
    function fund_search_list() {
        var url = "{% url 'find_record' %}";
        var search_dict = {};
        drop_down_val=document.getElementById("Mounting_drop").value
        search_dict['Manufacturer'] = $("#Manufacturer").val();
        search_dict['Mounting'] = document.getElementById("Mounting_drop").value;
        search_dict['productvalue'] = $("#productvalue").val();
        search_dict['HT'] = $("#HT").val();
        search_dict['Dia'] = $("#Dia").val();
        search_dict['Spring'] = $("#Spring").val();
        search_dict['Material'] = $("#Material").val();
        search_dict['Pitch'] = $("#Pitch").val();
        console.log(search_dict)
        url = "?"+"Manufacturer="+$("#Manufacturer").val()+"&Mounting="+document.getElementById("Mounting_drop").value+"&productvalue="+ $("#productvalue").val()+"&HT="+ $("#HT").val()+"&Dia="+$("#Dia").val()+"&Spring="+$("#Spring").val()+"&Material="+$("#Material").val()+"&Pitch="+$("#Pitch").val()
        console.log(url)
        window.location.href=url;
        // $.ajax({
        //     url: url,
        //     method: 'GET',
        //     data: search_dict,
        //     success: function (data) {},
        //     error: function (jqXHR, status, err) {
        //         // $("#id_alert").append(make_alert("danger","Sorry, Something went wrong."));
        //         // make_alert("danger", "Sorry, Something went wrong.");
        //     },
        // });
    }
</script>
<script>

   function edit(data){
        bootbox.confirm({
        message: "Are you sure to Edit Data?",
        buttons: {
            confirm: {
                label: 'Yes',
                className: 'btn-success'
            },
            cancel: {
                label: 'No',
                className: 'btn-danger'
            }
        },
        callback: function (result) {
            if(result){
            if ("{{type}}"=="0"){
               
               location.assign("{% url 'edit_surface' %}?id="+data);
           }
           else if("{{type}}"=="1"){
           
               location.assign("{% url 'edit_through' %}?id="+data);}
           else if("{{type}}"=="2") {
              
               location.assign("{% url 'edit_other' %}?id="+data);}
                }
           
           }
        });
        }
    $(document).ready(function () {
        $('#example').DataTable({
            scrollX: true,
            aLengthMenu: [
                [25, 25, 50],
                [25, 25, 50]
            ],
            'columnDefs': [{
                'targets': [8],
                'orderable': false,
            }]
        })
        document.getElementById('example_info').hidden=true
        document.getElementById('example_length').hidden=true
        document.getElementById('example_paginate').hidden=true});
</script>
{% endblock %}